package TwoWheeler

debug {
	visualize { 
		north {
			@Car.LeftWheel: green;
			@Car.RightWheel: yellow;
			@Car.Driver: magenta;
		}
		south {
			Main: black;
			Turn: gray;
			Strategy: red;
		}
	}
}

// Define identification for the Car
group Car [LeftWheel,RightWheel,Driver]

meta {
	void drive (byte dirLeft, byte dirRight) {
		rotating(@Car.LeftWheel,-dirLeft); 
		rotating(@Car.RightWheel,dirRight);
	} 
}
  
sequence Main {	
	
	do wait (config.assignTime) {
		switch {
			case #(connSource:SOUTH&EAST&FEMALE, connDest:EAST)>0:	module.id = @Car.LeftWheel;
			case #(connSource:SOUTH&EAST&FEMALE, connDest:WEST)>0:	module.id = @Car.RightWheel;
			case #()==2: 											module.id = @Car.Driver;	
		}
	}
	
	do {
		meta.sizeExtra = 3;
		meta.enable();	
	}
	
	execute Strategy;
}	




