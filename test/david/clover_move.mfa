include "symmetry"
	
Group Clover {North,South,East,West}


sequence CloverMove {
	
	do  {
		if ($(FEMALE&EAST) && !$(WEST)){
			setId(South@Clover);
		}
		if ($(EAST,South@Clover)){
			setId(West@Clover);
		}
		if ($(WEST,South@Clover)){
			setId(East@Clover);
		}
		if ($(East@Clover) && $(West@Clover)){
			setId(North@Clover);
		}
	} wait (consensus(4));
						
	disconnect(West@Clover,South@Clover);
	rotate(East@Clover,180);
	rotate(North@Clover,180);
	connect(WEast@Clover,@Floor);
	connect(South@Clover,@Floor);
	
	do {
		disconnect(West@Clover,@Floor);
		disconnect(North@Clover,@Floor);
	} wait (consensus(4));
	
	rotate(North@Clover,180);
	rotate(East@Clover,180);
	
	connect(South@Clover,West@Clover);
	
	do {
		if (@Clover) {
			restoreId();
			switchNorthSouth();
			switchEastWest();
		}	
	} wait (consensus(4));
	
}

