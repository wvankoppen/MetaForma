program Brandt

group Uplifter [Top,Bottom,Left,Right]
group Dummy [Left,Right]

sequence FlipThrough {
	// byte QUART;
	// byte HALF;
	module.gradientInit();
	module.gradientPropagate();
	
	do {		
		if (gradPri==3 && gradSec==0) module.id = West@Clover;
		if (gradPri==2 && gradSec==0) module.id = South@Clover;
		if (gradPri==3 && gradSec==1) module.id = North@Clover;
		if (gradPri==2 && gradSec==1) module.id = East@Clover;
		isRef = (gradPri == 0 && gradSec == 3);
	}
	
	do  {				
		disconnect_part(Left@Uplifter, NORTH&MALE&EAST|SOUTH&MALE&WEST);
		disconnect_part(Right@Uplifter, NORTH&MALE&EAST);
	} 
	
	do  {				
		rotate(Left@Uplifter, QUART);
		rotate(Right@Uplifter, QUART);
	} 
	
	disconnect_part(Top@Uplifter, NORTH);
	rotate(Top@Uplifter, HALF);
	
	do  {				
		rotate(Left@Uplifter, -QUART);
		rotate(Right@Uplifter, -QUART);
	} 
	
	do  {				
		rotate(Right@Uplifter, -HALF);
		rotate(Bottom@Uplifter, HALF);
	} 
	
	connect(@Floor, @Uplifter);	
	
	region.fixSymmetry();
	module.restoreID();
	region.finish();	
}