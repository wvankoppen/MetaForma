module Uplifter {Top,Bottom,Left,Right}
module Dummy {Left,Right}



module {
	void identify () {
		if (gradPri==1 && gradSec==1) { 
			id = Left@Uplifter);
		}
		if (gradPri==1 && gradSec==1) { 
			id = Left@Uplifter);
		}
		if (gradPri==1 && gradSec==1) { 
			id = Left@Uplifter);
		}
		if (gradPri==1 && gradSec==1) { 
			id = Left@Uplifter);
		}
	}
}

sequence FlipThrough {
	
	module.identify();
	
						
	do  {				
		disconnectPart(Left@Uplifter, NORTH&MALE&EAST|SOUTH&MALE&WEST);
		disconnectPart(Right@Uplifter, NORTH&MALE&EAST);
	} wait (consensus());
	
	do  {				
		rotate(Left@Uplifter, -90);
		rotate(Right@Uplifter, -90);
	} wait (consensus());
	
	disconnectPart(Top@Uplifter, NORTH);
	rotate(Top@Uplifter, -180);
	
	do  {				
		rotate(Left@Uplifter, -90);
		rotate(Right@Uplifter, -90);
	} wait (consensus());
	
	do  {				
		rotate(Right@Uplifter, -180);
		rotate(Bottom@Uplifter, 180);
	} wait (consensus());
	
	connect(@Floor, @Uplifter);	
	
	do {
		fixSymmetry ();
	} until (consensus());
	
	do {
		if (!@Floor) {
			renameRestore();
		}
	} wait (consensus());
	
}
