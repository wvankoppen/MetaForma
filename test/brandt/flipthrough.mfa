program Brandt

group Uplifter [Top,Bottom,Left,Right]
group Dummy [Left,Right]

sequence FlipThrough {
	byte QUART;
	byte HALF;
	
	module.gradientInit();
	module.gradientPropagate();
	
	do {		
		if (gradPri==3 && gradSec==0) module.id = Clover.West;
		if (gradPri==2 && gradSec==0) module.id = Clover.South;
		if (gradPri==3 && gradSec==1) module.id = Clover.North;
		if (gradPri==2 && gradSec==1) module.id = Clover.East;
		isRef = (gradPri == 0 && gradSec == 3);
	}
	
	do  {				
		disconnect_part(@Uplifter.Left, NORTH&MALE&EAST|SOUTH&MALE&WEST);
		disconnect_part(@Uplifter.Right, NORTH&MALE&EAST);
	} 
	
	do  {				
		rotate(@Uplifter.Left, QUART);
		rotate(@Uplifter.Right, QUART);
	} 
	
	disconnect_part(@Uplifter.Top, NORTH);
	rotate(@Uplifter.Top, HALF);
	
	do  {				
		rotate(@Uplifter.Left, -QUART);
		rotate(@Uplifter.Right, -QUART);
	} 
	
	do  {				
		rotate(@Uplifter.Right, -HALF);
		rotate(@Uplifter.Bottom, HALF);
	} 
	
	connect(@Floor, @Uplifter);	
	
	region.finish();	
}