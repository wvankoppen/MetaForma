program Brandt
 
group InsideLifter [Top,Bottom]
group OutsideLifter [Top,Bottom]
group Inside
group Outside


sequence FlipOver {
	int HALF;
	int QUART;
	
	
	module.gradientInit();
	module.gradientPropagate();

	do  {
		if (module.gradPri == 0 && module.gradSec < 3 || module.gradSec==0 && module.gradPri<3) { 
			module.group = @Outside;
		}
		if (module.gradPri > 0 && module.gradSec > 0) { 
			module.group = @Inside;
		}
		if (module.gradPri==3 && module.gradSec==1) { 
			module.id = @InsideLifter.Top;
		}
		if (module.gradPri==1 && module.gradSec==3) { 
			module.id = @InsideLifter.Bottom;
		}
		if (module.gradPri==2 && module.gradSec==0) { 
			module.id = @OutsideLifter.Top;
		}
		if (module.gradPri==0 && module.gradSec==2) { 
			module.id = @OutsideLifter.Bottom;
		}
		module.isRef = (module.gradPri == 0 && module.gradSec == 3);
	}
					
	
	disconnect(@Outside, @Inside);
	disconnect(@OutsideLifter, @Inside);
	
	do {
		rotate(@InsideLifter.Top,HALF);
		rotate(@InsideLifter.Bottom,-HALF);
	} 
	
	do {
		rotate(@InsideLifter.Top,HALF);
		rotate(@InsideLifter.Bottom,-HALF);
	} 
	
	connect(@Outside, @Inside);
	connect(@OutsideLifter, @Inside);
		
	
	region.finish();
}
