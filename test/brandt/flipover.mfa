program Brandt
 
group InsideLifter [Top,Bottom]
group OutsideLifter [Top,Bottom]
group Inside
group Outside


sequence FlipOver {
	byte HALF;
	byte QUART;
	
	
	module.gradientInit();
	module.gradientPropagate();

	do  {
		if (gradPri == 0 && gradSec < 3 || gradSec==0 && gradPri<3) { 
			group = @Outside;
		}
		if (gradPri > 0 && gradSec > 0) { 
			group = @Inside;
		}
		if (gradPri==3 && gradSec==1) { 
			id = Top@InsideLifter;
		}
		if (gradPri==1 && gradSec==3) { 
			id = Bottom@InsideLifter;
		}
		if (gradPri==2 && gradSec==0) { 
			id = Top@OutsideLifter;
		}
		if (gradPri==0 && gradSec==2) { 
			id = Bottom@OutsideLifter;
		}
		isRef = (gradPri == 0 && gradSec == 3);
	}
					
	
	disconnect(@Outside, @Inside);
	disconnect(@OutsideLifter, @Inside);
	
	do {
		rotate(Top@InsideLifter,HALF);
		rotate(Bottom@InsideLifter,-HALF);
	} 
	
	do {
		rotate(Top@OutsideLifter,HALF);
		rotate(Bottom@OutsideLifter,-HALF);
	} 
	
	connect(@Outside, @Inside);
	connect(@OutsideLifter, @Inside);
		
	
	region.finish();
}
