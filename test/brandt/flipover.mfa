program Brandt
 
// group InsideLifter [Top,Bottom]
// group OutsideLifter [Top,Bottom]
group Inside
group Outside


sequence FlipOver {
	byte HALF;
	byte QUART;
	
	
	module.gradientInit();
	module.gradientPropagate();

	do  {
		if (gradPri == 0 && gradSec < 3 || gradSec==0 && gradPri<3) { 
			group = @Outside;
		}
		if (gradPri > 0 && gradSec > 0) { 
			group = @Inside;
		}
		if (gradPri==3 && gradSec==1) { 
			id = @InsideLifter.Top;
		}
		if (gradPri==1 && gradSec==3) { 
			id = @InsideLifter.Bottom;
		}
		if (gradPri==2 && gradSec==0) { 
			id = @OutsideLifter.Top;
		}
		if (gradPri==0 && gradSec==2) { 
			id = @OutsideLifter.Bottom;
		}
		isRef = (gradPri == 0 && gradSec == 3);
	}
					
	
	disconnect(@Outside, @Inside);
	disconnect(@OutsideLifter, @Inside);
	
	do {
		rotate(@InsideLifter.Top,HALF);
		rotate(@InsideLifter.Bottom,-HALF);
	} 
	
	do {
		rotate(@InsideLifter.Top,HALF);
		rotate(@InsideLifter.Bottom,-HALF);
	} 
	
	connect(@Outside, @Inside);
	connect(@OutsideLifter, @Inside);
		
	
	region.finish();
	module.doThat();
}
